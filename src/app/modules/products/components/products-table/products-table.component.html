<div class="container">
  <div class="col-12">
    <p-card styleClass="shadow-3 m-2 text-indigo-700" header="Produtos Vendidos">

      <p-button icon="pi pi-plus" label="Adicionar Produto" styleClass="p-button-outlined m-3" (onClick)="handleProductEvent(addProductEvent)"></p-button>

      <p-table #productsTable [value]="products" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" [rows]="10" [paginator]="true" [responsive]="true"
        [globalFilterFields]="['name', 'amount']" [tableStyle]="{'min-width': '50rem'}" [(selection)]="productSelected"
        [rowHover]="true" [showCurrentPageReport]="true" dataKey="id"
        currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} produtos."
        [showCurrentPageReport]="true">

      <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="tipo">
              Tipo
              <p-sortIcon field="tipo"></p-sortIcon>
            </th>
            <th pSortableColumn="seguradora">
              Seguradora
              <p-sortIcon field="seguradora"></p-sortIcon>
            </th>

            <th pSortableColumn="coCorretagem" >
              Co-corretagem
              <p-sortIcon field="coCorretagem"></p-sortIcon>
            </th>

            <th pSortableColumn="dataVigencia">
                  Data Vigência
                  <p-sortIcon field="dataVigencia"></p-sortIcon>
            </th>

            <th pSortableColumn="valorPremioLiquido">
                  Prêmio Líq. (R$)
                  <p-sortIcon field="valorPremioLiquido"></p-sortIcon>
            </th>

            <th pSortableColumn="comissaoVendaPorcentagem">
                  Comissão (%)
                  <p-sortIcon field="comissaoVendaPorcentagem"></p-sortIcon>
            </th>

            <th pSortableColumn="valorComissaoReceber">
                  Comissão (R$)
                  <p-sortIcon field="valorComissaoReceber"></p-sortIcon>
            </th>

            <th pSortableColumn="agenciamentoPorcentagem">
                  Agenciamento (%)
                  <p-sortIcon field="agenciamentoPorcentagem"></p-sortIcon>
            </th>


            <th pSortableColumn="nomeCliente">
                  Cliente
                  <p-sortIcon field="nomeCliente"></p-sortIcon>
                  <p-columnFilter type="text" field="nomeCliente" display="menu" matchMode="contains"
                    [showMatchModes]="false" [showOperator]="false" [showAddButton]="false">
                  </p-columnFilter>
            </th>

            <th style="width:10%">Ações</th>


          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-product>
          <tr>
            <td>{{ product?.tipo }}</td>
            <td>{{ product?.seguradora }}</td>
            <td>{{ product?.coCorretagem }}</td>
            <td>{{ product?.dataVigencia }}</td>
            <td>{{ product?.valorPremioLiquido | currency: "BRL" }}</td>
            <td>{{ product?.comissaoVendaPorcentagem }}</td>
            <td>{{ product?.valorComissaoReceber | currency: "BRL" }}</td>
            <td>{{ product?.agenciamentoPorcentagem }}</td>
            <td>{{ product?.nomeCliente }}</td>
            <td>
              <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-warning p-button-text" styleClass="p-button-sm"
                pTooltip="Editar Produto" tooltipPosition="top" (click)="handleProductEvent(editProductEvent, product?.id)">
              </button>
              <button pButton pRipple icon="pi pi-trash" class="button-delete p-button-rounded p-button-danger p-button-text"
                pTooltip="Remover Produto" tooltipPosition="top">
              </button>
            </td>
          </tr>

        </ng-template>

      </p-table>

    </p-card>


  </div>
</div>
